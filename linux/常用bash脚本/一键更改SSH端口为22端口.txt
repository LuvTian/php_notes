#!/bin/sh
SSH_PORT="22";
if [ -z "`grep ^Port /etc/ssh/sshd_config`" -a "$SSH_PORT" != '22' ];then
    sed -i "s@^#Port.*@&\nPort $SSH_PORT@" /etc/ssh/sshd_config
elif [ -n "`grep ^Port /etc/ssh/sshd_config`" ];then
    sed -i "s@^Port.*@Port $SSH_PORT@" /etc/ssh/sshd_config
fi
service sshd restart
service ssh restart